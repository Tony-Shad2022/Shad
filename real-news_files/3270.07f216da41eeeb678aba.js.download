"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3270],{53270:function(n,t,r){r(18509);var e=r(29439),o=(r(30666),r(95566),r(6129),r(9867),r(7231),r(21914)),i=r(65641),a=r(92972),c=r.n(a),l=r(83949),u=r(46826),s=r(31869),f=r(68075),d=r(80792),h=r(63578),v=r(75854),p=r(56552);function y(n,t){var r="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"===typeof n)return m(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(n,t)}(n))||t&&n&&"number"===typeof n.length){r&&(n=r);var e=0,o=function(){};return{s:o,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return a=n.done,n},e:function(n){c=!0,i=n},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function m(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}var g=function(n){var t=(0,o.useState)(!1),r=(0,e.Z)(t,2),a=r[0],c=r[1],m=(0,o.useState)(""),g=(0,e.Z)(m,2),b=g[0],j=g[1],R=(0,o.useState)(""),w=(0,e.Z)(R,2),O=w[0],x=w[1],S=(0,o.useState)(""),A=(0,e.Z)(S,2),I=A[0],N=A[1],P=(0,i.useDispatch)();(0,o.useEffect)((function(){L()}),[n]);var L=function(){C(D().radio)},Z=function(t,r){var e,o=y(n.listenRecord);try{for(o.s();!(e=o.n()).done;){var i,a=y(e.value.stations);try{for(a.s();!(i=a.n()).done;){var c=i.value;if((!t||c.radio===t)&&(!r||c.location===r))return c}}catch(l){a.e(l)}finally{a.f()}}}catch(l){o.e(l)}finally{o.f()}},D=function(){var t=function(){var n=(0,f.Ok)();return d.z2[n]||{radio:n,location:""}}(),r=t.radio,e=t.location,o=b||r,i=O||e,a=n.showRegionHierarchy?h.fu.listenLive:n.listenRecord[0];return(o?n.showRegionHierarchy?Z(o,i):n.listenRecord.find((function(n){return n.radio===o}),null,a):a)||a},C=function(n){(0,s.U9)(n).then((function(n){var t=n.program&&n.program.name?n.program.name:n;N(t)}))},E=function(n){c(!a)},_=function(n){var t=n.currentTarget.dataset.radio||"",r=n.currentTarget.dataset.location||"";j(t),x(r),c(!1),C(t)},k=function(n){13===n.charCode&&_(n)},H=function(t){var r="",e=t.currentTarget.dataset.radio,o=t.currentTarget.dataset.location;r=n.showRegionHierarchy?Z(e,o):n.listenRecord.find((function(n){return e===n.radio})),P((0,u.o)({mediaItem:{id:r.liveRadioId,source:v.lS,isLive:!0,isVideo:!1,showName:I},isVisible:!0,selector:v.IL,forcePersistence:!0,featureAttribution:{name:"radio-bar"}}))},T=function(n){32===n.charCode?(n.preventDefault(),H(n)):13===n.charCode&&H(n)},U=function(n){return(0,p.jsx)("ul",{children:n.map((function(n){return(0,p.jsx)("li",{children:(0,p.jsx)("button",{id:"radioRegion-".concat(n.radio),onClick:_,onKeyPress:k,"data-radio":n.radio,"data-location":n.location,value:n.radio,children:n.location},n.radio)},n.location)}))},"radioRegionList")};return(0,p.jsxs)("div",{className:"listenLive ".concat(n.listenRecord&&n.listenRecord.length>1?"hasDropdown":""," ").concat(n.showRegionHierarchy?"showsProvinces":""),children:[(0,p.jsx)("h2",{className:"a11y",children:"LIVE RADIO"}),(0,p.jsx)("span",{className:"liveLabel",children:"LIVE"}),function(){if(n.listenRecord.length<=1)return null;var t=D();return(0,p.jsxs)("div",{className:"locationDropDown",children:[(0,p.jsxs)("button",{className:"locationButton ".concat(a?"open":""),onClick:E,"aria-label":"Choose your region, currently ".concat(t.location),"aria-expanded":a?"true":"false",children:[t.location,(0,p.jsx)(l.ZP,{type:"chevron"})]}),a?n.showRegionHierarchy?(0,p.jsxs)("div",{className:"locationList",children:[(0,p.jsx)("h3",{className:"a11y",children:"Provinces"}),n.listenRecord.map((function(n,t){return(0,p.jsxs)("div",{className:"radioRegion",children:[(0,p.jsx)("h4",{children:n.province},n.province),U(n.stations)]},"radioRegion-".concat(t))}))]}):U(n.listenRecord):null]})}(),function(){var n=D(),t=n.title?n.title:"CBC Radio One";return(0,p.jsx)("div",{className:"listenLink",onClick:H,onKeyPress:T,"data-radio":n.radio,"data-location":n.location,role:"button",tabIndex:"0",children:(0,p.jsxs)("div",{className:"linkContainer",children:[(0,p.jsx)(l.ZP,{type:"play",height:"25px",width:"25px","aria-label":"play"}),(0,p.jsx)("div",{className:"schedule nowPlaying",children:(0,p.jsxs)("span",{className:"nowPlayingNetwork",children:[t," ",(0,p.jsx)("span",{className:"".concat(""===I?"hide":""),children:"-"})," ",I]})})]})})}()]})};g.propTypes={listenRecord:c().array,showRegionHierarchy:c().bool},g.defaultProps={listenRecord:[{}],showRegionHierarchy:!1};var b=function(n,t){return JSON.stringify(n.listenRecord)===JSON.stringify(t.listenRecord)};t.Z=(0,o.memo)(g,b)},80792:function(n,t,r){r.d(t,{X3:function(){return a},cF:function(){return c},z2:function(){return l}});r(58109),r(95566),r(68438),r(83464),r(19496);var e=r(4942);function o(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push.apply(r,e)}return r}function i(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,e.Z)(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}var a=function(n){return i({title:"",liveRadioId:"",radio:"",location:""},n)},c=function(n){return i({province:"",stations:[]},n)},l={toronto:{radio:"toronto",location:"Toronto"}}},31869:function(n,t,r){r.d(t,{U9:function(){return j},Zj:function(){return g}});r(18509),r(49632);var e=r(43144),o=r(15671),i=r(60136),a=r(82963),c=r(61120),l=r(72407),u=r(93433),s=(r(83464),r(95566),r(19496),r(9867),r(7231),r(80792)),f=r(93789),d=r(56241),h=r(63578);function v(n){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,e=(0,c.Z)(n);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(e,arguments,o)}else r=e.apply(this,arguments);return(0,a.Z)(this,r)}}function p(n,t){var r="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(!n)return;if("string"===typeof n)return y(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(n,t)}(n))||t&&n&&"number"===typeof n.length){r&&(n=r);var e=0,o=function(){};return{s:o,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return a=n.done,n},e:function(n){c=!0,i=n},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function y(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}var m=function(){var n,t=[],r=p(h.nv);try{var e=function(){var r=n.value,e=t.find((function(n){return n.province===r.province}));if(e)e.stations.push(r.listenLive[0]);else{var o,i={province:"",stations:[]};i.province=r.province,(o=i.stations).push.apply(o,(0,u.Z)(r.listenLive)),t.push(i)}};for(r.s();!(n=r.n()).done;)e()}catch(o){r.e(o)}finally{r.f()}return t},g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[],r=!1;return null===n&&(n=m(),r=!0),n.forEach((function(n){var e={};e=r?(0,s.cF)({province:n.province,stations:n.stations.map((function(n){return(0,s.X3)({title:n.title||"",liveRadioId:n.liveRadioId||"",radio:n.radio||"",location:n.location||""})}))}):(0,s.X3)({title:n.title||"",liveRadioId:n.liveRadioId||"",radio:n.radio||"",location:n.location||""}),t.push(e)})),t},b=function(n){(0,i.Z)(r,n);var t=v(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,e.Z)(r)}((0,l.Z)(Error));function j(n){var t="".concat(f.bl.radio+encodeURIComponent("&locationKey=".concat(n)));return fetch(t).then((function(n){if(!n.ok)throw new b(n.statusText);return n.json()})).catch((function(n){return d.Z.error(n),"Sorry, the network request failed."}))}}}]);