"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9743],{9743:function(e,t,n){n.d(t,{Z:function(){return W}});n(58109),n(95566),n(68438),n(83464),n(19496);var r=n(4942),o=n(21914),i=n(65641),c=n(92972),s=n.n(c),a=n(14507),u=n.n(a),l=n(15861),d=n(87757),f=n.n(d),p=n(6625),b=(n(49632),n(43144)),m=n(15671),h=n(60136),y=n(82963),w=n(61120),v=n(72407),P=n(6671),O=n(43386),j=n(56241);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,w.Z)(e);if(t){var o=(0,w.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,y.Z)(this,n)}}var x=function(e){(0,h.Z)(n,e);var t=C(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return(0,b.Z)(n)}((0,v.Z)(Error));n(9867),n(7231);function g(e,t){return{type:P.sL,payload:{json:e,rectype:t}}}var D=n(68075),S=n(4964),_=n(45532);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=new x("no visitor cookie");var N="horizontal",E="We\u2019re experimenting with a new recommendation system that will offer a better way to browse and discover content that interests you.",k=n(29439),R=n(56552),L=function(e){var t=(0,o.useState)(!1),n=(0,k.Z)(t,2),r=n[0],i=n[1],c=e.disclaimer?e.disclaimer:"";return(0,R.jsxs)("div",{className:"disclaimer-container",children:[(0,R.jsx)("div",{className:"disclaimer","data-status":r,id:"disclaimer-info",children:c}),(0,R.jsx)("button",{className:"question-mark sclt-questionmark","aria-describedby":"disclaimer-info","aria-label":"More Information",onClick:function(){i(!r)},children:r?"X":"?"})]})},T=n(33568),H=n(34325),X=n(46314),q=n(94481),F=n(26574),I=n(49291),z=n(97240);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(e){var t=(0,i.useDispatch)(),n=function(){return t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=(0,D.$i)("cbc_plus")||(0,D.$i)("cbc_visitor"),n={"Content-Type":"application/json"},r="";return t?(n=A(A({},n),{},{"X-Client-ID":"".concat(t.name,":").concat(t.value)}),function(){var t=(0,l.Z)(f().mark((function t(o){var i,c,s,a,u;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,O.WY)(S.o,{method:"POST",headers:n,body:JSON.stringify({query:_.FX,variables:{lineupSlug:"recommended",pageSize:e}})});case 3:return i=t.sent,r=i.headers.get("X-Recommendation-Type"),t.next=7,i.json();case 7:c=t.sent,s=c.data,a=(0,p.H9)(s.allContentItems.nodes),u=a.filter((function(e){return"sponsoredcontent"!==(null===e||void 0===e?void 0:e.itemType)})),o(g(u,r)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),j.Z.error("fetch_nbox",new x(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()):(j.Z.error("fetch_nbox",B),function(){})}(e.itemCount))};(0,o.useEffect)((function(){return e.shouldFetch&&(window&&window.CBC&&window.CBC.APP&&window.CBC.APP.PubSub&&window.CBC.APP.PubSub.subscribe&&window.CBC.APP.PubSub.subscribe("READ",n),n()),function(){window&&window.CBC&&window.CBC.APP&&window.CBC.APP.PubSub&&window.CBC.APP.PubSub.unsubscribe&&window.CBC.APP.PubSub.unsubscribe("READ",n)}}),[]);var r=(0,i.useSelector)((function(e){return e.nbox.items})),c=(0,i.useSelector)((function(e){return e.nbox.type}));return r&&r.length?function(){var t="Recommended for you",n={items:r,id:"__nbox_".concat(c,"__"),fetchSection:!1,headline:t,itemCount:e.itemCount,className:"recommended",displayPolicy:e.displayPolicy,customTitleBar:e.expandedDisclaimer?(0,R.jsxs)("div",{className:"nboxExplainerTitle",children:[(0,R.jsx)(I.X6,{text:"Recommended",level:"h2",levelClassName:"h3"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{children:(0,R.jsxs)(F.C,{url:"".concat("https://cbchelp.cbc.ca/hc/en-us/articles/115004993533-New-CBC-Recommendations-on-search-page"),external:!0,children:[(0,R.jsx)("span",{className:"question-mark","aria-hidden":"true",children:"?"}),"How does this work?"]})}),(0,R.jsx)("p",{className:"revealer",children:E})]})]}):null,title:e.title,section:"recommended",loadMore:!1,trackingSection:"contentlist-recommended",forcedImageAspectRatio:"16x9",cardClickHandler:null},o=u()("recommendations",e.className,e.layout),i=e.layout===N?(0,R.jsx)(z.Z,{level:"h2",children:t}):null,s=e.expandedDisclaimer?null:(0,R.jsx)(L,{disclaimer:E}),a=e.layout===N?(0,R.jsx)(T.Z,M({},n)):(0,R.jsx)(q.Z,M({},n));return(0,R.jsxs)("div",{className:o,children:[i,s,a]})}():null};U.propTypes={layout:s().string,itemCount:s().number,shouldFetch:s().bool,expandedDisclaimer:s().bool,title:s().string,displayPolicy:s().instanceOf(H.Z)},U.defaultProps={layout:N,itemCount:5,shouldFetch:!0,expandedDisclaimer:!1,title:"",displayPolicy:new X.Z};var W=U}}]);